# Trade Data Extractor

Инструмент для извлечения данных из базы данных UNCOMTRADE по поисковому запросу.

Особенности базы данных:

1) База данных UNCOMTRADE за 2024 год;
2) В базе присутствуют только высокотехнологические продукты с кодами 84, 85, 90 (Товары представлены до 4 знаков HS);
2) Есть возможность искать стран заявителей, но не стран с котороыми велась торговля (По умолчанию стоит Российская Федерация)

# Data Extractor

Командный инструмент для извлечения и анализа торговых данных из базы данных.

## Функциональность

- Извлечение торговых данных по дате и стране
- Расшифровка числовых кодов стран и товаров
- Экспорт данных в CSV формат
- Просмотр доступных стран и товарных категорий

## Использование

### Базовые команды

```bash
# Извлечь данные по дате
python data_extractor.py --date 2024-12-01

# Извлечь данные по стране (по коду)
python data_extractor.py --country 792

# Извлечь данные по стране (по названию)
python data_extractor.py --country "Turkey"

# Извлечь данные по дате и стране с экспортом в CSV
python data_extractor.py --date 2024-12-01 --country 792 --to_csv

# Извлечь данные с ограничением вывода
python data_extractor.py --country 792 --limit 10
```

### Дополнительные команды

```bash
# Показать список доступных стран
python data_extractor.py --list-countries

# Показать список доступных товарных категорий
python data_extractor.py --list-products

# Указать имя выходного CSV файла
python data_extractor.py --country 792 --to_csv --output turkey_data.csv
```

### Примеры

```bash
# Извлечь данные по торговли Турции высокотехнологичесвими товарами с Россией за декабрь 2024
python data_extractor.py --date 2024-12-01 --country 792 --to_csv

# Просмотреть данные по торговле Казахстана с Россией (первые 30 записей)
python data_extractor.py --country 398 --limit 30

```

## Параметры командной строки

| Параметр | Описание | Пример |
|----------|----------|---------|
| `-d, --date` | Фильтр по дате (YYYY-MM-DD) | `--date 2024-12-01` |
| `-c, --country` | Фильтр по стране (код или название) | `--country 792` |
| `-csv, --to_csv` | Экспорт в CSV файл | `--to_csv` |
| `-o, --output` | Имя выходного файла CSV | `--output data.csv` |
| `-l, --limit` | Лимит отображаемых записей | `--limit 50` |
| `--list-countries` | Показать доступные страны | `--list-countries` |
| `--list-products` | Показать товарные категории | `--list-products` |
| `-db, --database` | Путь к файлу базы данных | `--database custom.db` |

## Выходные данные

### Структура данных

Программа выводит данные в следующем формате:

| Поле | Описание | Тип |
|------|----------|------|
| `date` | Дата операции | Дата |
| `flowtype` | Тип операции (импорт/экспорт) | Строка |
| `reporter_name` | Название страны-отчетной стороны | Строка |
| `cmdcode` | Код товара (HS code) | Целое число |
| `cmd_description` | Описание товара | Строка |
| `qty` | Количество | Число |
| `primaryvalue` | Стоимость | Число |

### Формат CSV

При экспорте в CSV используется кодировка UTF-8, разделитель запятая.

## Обработка ошибок

- При отсутствии файла базы данных выводится сообщение об ошибке
- При неверном формате даты - стандартное сообщение argparse
- При отсутствии страны в словаре - сообщение о невозможности найти
- При пустом результате - информационное сообщение

